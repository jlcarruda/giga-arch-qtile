dir="$HOME/Pictures/Wallpapers/"
theme_dir=$(find $dir -mindepth 1 -maxdepth 1 -type d | sort --random-sort | head -1)
file=`/bin/ls -1 "$theme_dir" | sort --random-sort | head -1` # Select random file on directory
path=`readlink --canonicalize "$theme_dir/$file"` # Converts to full path
#### Set Wallpaper Selected / Random

while getopts "w:t:l" opt; do
  case "$opt" in
    w) wall=$OPTARG ;;
    t) back=$OPTARG ;;
    l) light="-L" ;;
  esac
done

set_wall(){
  if [ -z "$wall" ]
    then
      wp=$path
    else
      wp=$dir$wall
  fi
  wpg -c -s ${wp} --backend wal # Wal sets wallpaper and genates new color scheme
  sudo cp ${wp} "/usr/local/backgrounds/background.png"
  sudo cp -r ~/.local/share/themes/FlatColor  /usr/local/themes/
  qtile cmd-obj -o cmd -f restart 
}

set_wall
